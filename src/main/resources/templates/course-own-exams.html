<!DOCTYPE html>
<html lang="fa" dir="rtl" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>آزمون‌های من</title>

    <!-- Bootstrap 5 RTL -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">

    <style>
        body {
            font-family: sans-serif;
        }
    </style>
</head>
<body class="bg-light">

<div class="container mt-4">

    <!-- Title -->
    <div class="mb-4 text-center">
        <h4 class="fw-bold">
            آزمون‌های من در درس
            <span class="text-primary" th:text="${course.courseCode}"></span>
        </h4>
    </div>

    <!-- ====== MESSAGES ====== -->
    <div th:if="${errorMessage}" class="alert alert-success text-center">
        <span th:text="${errorMessage}"></span>
    </div>

    <!-- Success Alert -->
    <div th:if="${examEditSuccess}" class="alert alert-success text-center">
        <span th:text="${examEditSuccess}"></span>
    </div>

    <!-- Top Actions -->
    <div class="mb-3">
        <a th:href="@{'/course/' + ${course.courseCode} + '/exams'}"
           class="btn btn-secondary">
            ⬅ بازگشت
        </a>
    </div>

    <!-- Table Card -->
    <div class="card shadow-sm">
        <div class="card-body p-0">

            <table class="table table-bordered table-hover align-middle mb-0 text-center">
                <thead class="table-light">
                <tr>
                    <th>کد آزمون</th>
                    <th>عنوان</th>
                    <th>تاریخ برگزاری</th>
                    <th>مدت (دقیقه)</th>
                    <th>توضیحات</th>
                    <th>عملیات</th>
                </tr>
                </thead>

                <tbody>
                <tr th:each="exam : ${ownExams}">
                    <td th:text="${exam.examCode}"></td>
                    <td th:text="${exam.title}"></td>
                    <td th:text="${exam.startDate}"></td>
                    <td th:text="${exam.durationInMinutes}"></td>
                    <td th:text="${exam.description}"></td>

                    <td>
                        <div class="d-flex gap-2 justify-content-center">
                            <a th:href="@{'/course/' + ${course.courseCode} + '/exams/edit/' + ${exam.examCode}}"
                               class="btn btn-sm btn-primary">
                                ✏ ویرایش
                            </a>

                            <a th:href="@{'/course/' + ${course.courseCode} + '/exams/delete/' + ${exam.examCode}}"
                               class="btn btn-sm btn-danger"
                               onclick="return confirm('آیا از حذف این آزمون مطمئن هستید؟');">
                                🗑 حذف
                            </a>
                        </div>
                    </td>
                </tr>

                <tr th:if="${#lists.isEmpty(ownExams)}">
                    <td colspan="6" class="text-muted py-4">
                        شما هنوز آزمونی برای این درس ایجاد نکرده‌اید
                    </td>
                </tr>
                </tbody>
            </table>

        </div>
    </div>

</div>

</body>
</html>
